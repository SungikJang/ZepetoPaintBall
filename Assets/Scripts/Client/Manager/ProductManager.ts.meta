fileFormatVersion: 2
guid: 334d24e97e68ad944a5b55bcaecbe1d8
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Product_1 = require(\"ZEPETO.Product\");\r\nconst
    ZEPETO_World_1 = require(\"ZEPETO.World\");\r\nconst ProductSync_1 = require(\"../Network/ProductSync\");\r\nconst
    Connector_1 = require(\"../Network/Connector\");\r\nconst Enums_1 = require(\"../Enums\");\r\nclass
    ProductManager {\r\n    constructor() {\r\n        this._itemsCache = [];\r\n       
    this._itemsPackageCache = [];\r\n        this._currencyPackageCache = [];\r\n       
    this._productCache = new Map();\r\n    }\r\n    Init() {\r\n        ZEPETO_Product_1.ProductService.OnPurchaseCompleted.AddListener((product,
    response) => {\r\n            console.log(`${response.productId} Purchase Completed`);\r\n           
    if (product.ProductType == ZEPETO_Product_1.ProductType.Item) {\r\n               
    this.RefreshBalance();\r\n                this.RefreshInventory();\r\n           
    }\r\n            if (product.ProductType == ZEPETO_Product_1.ProductType.ItemPackage)
    {\r\n                this.RefreshBalance();\r\n                this.RefreshInventory();\r\n           
    }\r\n            if (product.ProductType == ZEPETO_Product_1.ProductType.CurrencyPackage)
    {\r\n                this.RefreshBalance();\r\n            }\r\n        });\r\n       
    ZEPETO_Product_1.ProductService.OnPurchaseFailed.AddListener((product, response)
    => {\r\n            console.log(response.message);\r\n        });\r\n    }\r\n   
    get ItemsCache() {\r\n        return this._itemsCache;\r\n    }\r\n    set ItemsCache(value)
    {\r\n        this._itemsCache = value;\r\n    }\r\n    get ItemsPackageCache()
    {\r\n        return this._itemsPackageCache;\r\n    }\r\n    set ItemsPackageCache(value)
    {\r\n        this._itemsPackageCache = value;\r\n    }\r\n    get CurrencyPackageCache()
    {\r\n        return this._currencyPackageCache;\r\n    }\r\n    set CurrencyPackageCache(value)
    {\r\n        this._currencyPackageCache = value;\r\n    }\r\n    get ProductSyncinstance()
    {\r\n        return this._productSync;\r\n    }\r\n    set ProductSyncinstance(value)
    {\r\n        this._productSync = value;\r\n    }\r\n    get ProductCache() {\r\n       
    return this._productCache;\r\n    }\r\n    set ProductCache(value) {\r\n       
    this._productCache = value;\r\n    }\r\n    GainBalance(currencyId, quantity)
    {\r\n        Connector_1.default.Instance.ReqToServer(''onCredit'', { currencyId:
    Enums_1.Currency.Gold, quantity: quantity });\r\n    }\r\n    UseBalance(currencyId,
    quantity) {\r\n        Connector_1.default.Instance.ReqToServer(''onDebit'',
    { currencyId: Enums_1.Currency.Diamond, quantity: quantity });\r\n    }\r\n   
    PurchaseItem(ProductId) {\r\n        const product = this._itemsCache.find((ir)
    => ir.productId === ProductId);\r\n        if (product) {\r\n            ZEPETO_Product_1.ProductService.OpenPurchaseUI(product);\r\n       
    }\r\n        else {\r\n            console.log(`Non-consumable product does not
    exist.`);\r\n        }\r\n    }\r\n    PurchaseItemsPackage(PackageId) {\r\n       
    const product = this._itemsPackageCache.find((ir) => ir.productId === PackageId);\r\n       
    if (product) {\r\n            ZEPETO_Product_1.ProductService.OpenPurchaseUI(product);\r\n       
    }\r\n        else {\r\n            console.log(`Non-consumable product does not
    exist.`);\r\n        }\r\n    }\r\n    PurchaseCurrencyPackage(PackageId) {\r\n       
    const product = this._currencyPackageCache.find((ir) => ir.productId === PackageId);\r\n       
    if (product) {\r\n            ZEPETO_Product_1.ProductService.OpenPurchaseUI(product);\r\n       
    }\r\n        else {\r\n            console.log(`Non-consumable product does not
    exist.`);\r\n        }\r\n    }\r\n    RefreshBalance() {\r\n        if (this._productSync)
    {\r\n            this._productSync.StartRefreshBalance();\r\n        }\r\n   
    }\r\n    RefreshInventory() {\r\n        if (this._productSync) {\r\n           
    this._productSync.StartRefreshInventory();\r\n        }\r\n    }\r\n    SetMultiPlay(value)
    {\r\n        this._multiplay = value;\r\n    }\r\n}\r\nexports.default = ProductManager;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZHVjdE1hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQcm9kdWN0TWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFvRDtBQUNwRCw2Q0FBNkQ7QUFDN0QsbURBQXdGO0FBQ3hGLCtDQUFrRDtBQUVsRCx3REFBaUQ7QUFDakQsb0RBQTZDO0FBQzdDLG9DQUFrQztBQUVsQyxNQUFxQixjQUFjO0lBQW5DO1FBQ1UsZ0JBQVcsR0FBb0IsRUFBRSxDQUFDO1FBQ2xDLHVCQUFrQixHQUFvQixFQUFFLENBQUM7UUFDekMsMEJBQXFCLEdBQW9CLEVBQUUsQ0FBQztRQUc1QyxrQkFBYSxHQUErQixJQUFJLEdBQUcsRUFBeUIsQ0FBQztJQWtIdkYsQ0FBQztJQTlHQyxJQUFJO1FBQ0YsK0JBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDbkUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxTQUFTLHFCQUFxQixDQUFDLENBQUM7WUFDeEQsSUFBSSxPQUFPLENBQUMsV0FBVyxJQUFJLDRCQUFXLENBQUMsSUFBSSxFQUFFO2dCQUMzQyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ3pCO1lBQ0QsSUFBSSxPQUFPLENBQUMsV0FBVyxJQUFJLDRCQUFXLENBQUMsV0FBVyxFQUFFO2dCQUNsRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ3pCO1lBQ0QsSUFBSSxPQUFPLENBQUMsV0FBVyxJQUFJLDRCQUFXLENBQUMsZUFBZSxFQUFFO2dCQUN0RCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7YUFDdkI7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILCtCQUFjLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENB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","assetPath":"Assets/Scripts/Client/Manager/ProductManager.ts","manifest":{"properties":[],"name":"ProductManager","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 00b41a312cc67bc43696108ea4affb25
  onlyWriteTrigger: 0
